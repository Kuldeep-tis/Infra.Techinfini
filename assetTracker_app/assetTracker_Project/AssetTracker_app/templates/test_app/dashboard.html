<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome to My Landing Page</title>

  <style>
    body {
      
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }

  ul {
  
    list-style-type: none;
    margin: -10px;
    overflow: hidden;
    background-color: #333;
  }

  li {
    float: right;
  }

  /* li a {
    display: block;
   color: white;
   text-align: center;
   padding: 14px 16px;
   text-decoration: none; 
  } */
   

    h1 {
      margin-top: 20px;
      text-align: center;
    }

    .title {
      color: #8e44ad;
    } 

  

    .dashboard {
      text-align: center;
      margin-top: 30px;
      font-size: 28px;
    }

    .card-container {
      display: flex;
    
      margin-top: 40px;
      margin-left: 40px;
      gap: 35px;
      
      
    }

    .card {
      width: 250px;
      height: 100px;
      background-color: white;
      color: black;
      border-radius: 12px;
      padding: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      
    }

    

    .card h2, .card h1 {
      font-size: 20px;
      margin: 0;
    }
    
  .card-container :hover{
      font-size: 18px;
      pointer-events: all;
  }
    
    
  </style>
</head>
<body>
<ul>

  <p style="float: left; font-weight: bold; margin-top: 40px; color: white; font-size: 20px; margin-left: 20px;">IT Asset Managment</p>
         <a href="{% url 'logout' %}" style="text-decoration: none;"><p style=" float: right;  font-size: 20px; margin-right: 20px;"><button style="background-color: red; color: white; width: 130px; padding: 9px; border-radius: 12px; margin-top: 12px;">Logout</button></a>

  <p style="margin-top: 20px; text-transform: capitalize; float: right; color: white; margin-right: 20px; margin-top: 40px; font-size: 20px; font-weight: bold;">Wel-Come, {{fullname}}</p>
 
 
  
</ul>
  
{% if messages %}
{% for message in messages %}
<p id="msg" style="text-align: center; font-weight: bold; text-transform: capitalize;">{{message}}</p>
{% endfor %}
{% endif %}

  <div class="card-container">
    <div class="card" style=" border-left: 4px solid blue;">
      <a href="{% url 'asset_details' %}" style="text-decoration: none;">
      <h1 style="color: black; cursor: pointer;">Total Assets: {{ total_asset }}</h1></a>
    </div>
    <div class="card" onclick="redirectWithStatus('Avaliable')" style=" border-left: 4px solid green;">
      <h1 style="cursor: pointer;">Available Assets: {{ avaliable_asset }}</h1>
    </div>

    <div class="card" onclick="redirectWithStatus('Assigned')" style=" border-left: 4px solid #c5c528;">
      <h1 style="cursor: pointer;">Assigned Assets: {{ assigned_asset }}</h1>
    </div>
    <div class="card" style=" border-left: 4px solid red;">
      <a href="{% url 'view_employee' %}" style="text-decoration: none;">
      <h2 style="color: black;">Total Employees: {{ total_employee }}</h2></a>
    </div>
    <div class="card" style=" border-left: 4px solid #bd1ebd">
      <a href="{% url 'repair_table' %}" style="text-decoration: none;">
      <h1 style="color: black;">Repair: {{repair_tool}}</h1></a>
    </div>
  </div>
  <br>
  <br>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<div style="display: flex; gap: 2rem;">
<div>
<div style="width: 500px; height: 270px; background-color: #fff; border: #ddd; border-radius: 8px; margin-left: 40px; border-radius: 12px;">
  <br>
 <h2 style=" margin-left: 20px; font-size: 30px; margin-top: 10px;"> Recent Activity</h2>
 {% for k in action %}
 
 {% if k.is_info == 'Asset Added' %}
 <p style="text-transform: capitalize;  margin-left: 25px;">&#9989; {{k.name}} ({{k.unique_id}}) is Added</p>
 {% endif %}
  {% if k.is_info == 'Asset Edited' %}
 <p style="text-transform: capitalize;  margin-left: 25px;">  &#128295; {{k.name}} ({{k.unique_id}}) is Edited</p>
 {% endif %}
  {% if k.is_info == 'Asset Deleted' %}
 <p style="text-transform: capitalize;  margin-left: 25px;">&#x1F5D1; {{k.name}} ({{k.unique_id}}) is Deleted</p>
 {% endif %}
   {% if k.is_info == 'Employee Added' %}
 <p style="text-transform: capitalize;  margin-left: 25px;"> &#9989;{{k.name}} ({{k.unique_id}}) is Added</p>
 {% endif %}
   {% if k.is_info == 'Employee Edited' %}
 <p style="text-transform: capitalize;  margin-left: 25px;"> &#128295; {{k.name}} ({{k.unique_id}}) is Edited</p>
 {% endif %}



   {% if k.is_info == 'Employee Deleted' %}
 <p style="text-transform: capitalize;  margin-left: 25px;"> &#x1F5D1;{{k.name}} ({{k.unique_id}}) is Deleted</p>
 {% endif %}



    {% if k.is_info == 'Category Deleted'  %}
 <p style=" text-transform: capitalize; margin-left: 25px;"> &#x1F5D1;Category "{{k.name}}"  is Deleted</p>
 {% endif %}
    {% if k.is_info == 'Category Added' %}
 <p style="text-transform: capitalize;  margin-left: 25px;"> &#9989;Category "{{k.name}}" is Added</p>
 {% endif %}
    {% if k.is_info == 'Category Edited' %}
 <p style="text-transform: capitalize; margin-left: 25px;">  &#128295;Category "{{k.name}}" is Edited</p>
 {% endif %}
     {% if k.is_info == 'Asset Assigned' %}
 <p style="text-transform: capitalize;  margin-left: 25px;"> &#9989; {{k.name}}({{k.unique_id}}) is Assigned to {{k.emp_name}}({{k.emp_code}})</p>
 {% endif %}
     {% if k.is_info == 'Asset Unassigned' %}
 <p style="text-transform: capitalize;  margin-left: 25px;"> &#x1F5D1;{{k.name}}({{k.unique_id}}) is unassigned</p>
 {% endif %}
 
     {% if k.is_info == 'Repair Created' %}
 <p style="text-transform: capitalize;  margin-left: 25px;"> &#128295; Repair Created for {{k.name}} ({{k.unique_id}}) </p>
 {% endif %}
 
     {% if k.is_info == 'Repair Done' %}
 <p style="text-transform: capitalize; margin-left: 25px;">&#9989;  Repair done of {{k.name}} ({{k.unique_id}})</p>
 {% endif %}

 {% endfor %}


</div>
  
<div  style="width: 500px; height: 120px; background-color: #fff; border: #ddd; border-radius: 8px; margin-left: 40px; border-radius: 12px;">
  <p> </p>
<h2 style="margin-left: 20px; ">Alert</h2>
<p style="margin-left: 20px; color: #b9591d"> Employee with No Assigned Asset : {{emp_no_asset}}</p>
<p style="margin-left: 20px; color: black;">Repair Alerts :{{repair_alert}}</p>
</div>
</div>
<div style="height: 350px; width: 450px; background-color: #d2d7d9; margin-left: 40px; border-radius: 12px; margin-top: 10px;">
  <h2 style="margin-left: 20px; margin-top: 10px;">Quick Navigation</h2>



  <div style="display: flex; gap: 4rem;">
   <div style="height: 45px; width: 150px; background-color: #9b9b9b; text-align: center; margin-left: 40px;">
     <a href="/view_tool" style="text-decoration: none;"><p style="text-decoration: none; color: black; margin-top: 10px;">Details</p></a>
   </div>
   <div style="height: 45px; width: 150px; background-color: #9b9b9b;  text-align: center;">
    <a href="/assign_new" style="text-decoration: none;"><p style="text-decoration: none; color: black; margin-top: 10px;">Assign</p></a>
   </div>
  </div>
<br>
<br>
<br>
  <div style="display: flex; gap: 3rem;">
     <div style="height: 45px; width: 150px; background-color: #9b9b9b; margin-left: 40px; text-align: center;">




   
      <a href="/view_employee" style="text-decoration: none;"><p style="text-decoration: none; color: black; margin-top: 10px;">Employee</p></a>
     </div>
       <div style="height: 45px; width: 150px; background-color: #9b9b9b; margin-left: 40px; text-align: center; margin-left: 15px;">
     <a href="/asset_details" style="text-decoration: none;"><p style="text-decoration: none; color: black; margin-top: 10px;">Asset</p></a>
       </div>
  </div>
  <br>
  <br>
<br>
  <div style="display: flex; gap: 4rem;">
    <div  style="height: 45px; width: 150px; background-color: #9b9b9b; margin-left: 40px; text-align: center;">
    <a href="/inventory" style="text-decoration: none;"><p style="text-decoration: none; color: black; margin-top: 10px;">Inventory</p></a>
    </div>
     <div style="height: 45px; width: 150px; background-color: #9b9b9b; margin-left: 0px; text-align: center;">
       
    <a href="{% url 'repair_table' %}" style="text-decoration: none;"><p style="text-decoration: none; color: black; margin-top: 10px;">Repair</p></a>
     </div>
</div>
</div>
</div>



</body>
<script>
  

    function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          if (cookie.substring(0, name.length + 1) === (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }
    function redirectWithStatus(status) {
      fetch("{% url 'dashboard_redirection' %}", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRFToken": getCookie("csrftoken"),
        },
        body: JSON.stringify({ tool_status: status }),
      })
      .then((response) => response.json())
      .then((data) => {
        if (data.redirect_url) {
          window.location.href = data.redirect_url;
        } else {
          alert("Something went wrong with redirection.");
        }
      })
      .catch((error) => {
        console.error("Fetch error:", error);
      });
    }


           const myTimeout = setTimeout(myGreeting, 2000);

function myGreeting() {
  document.getElementById("msg").innerHTML = ""
}

function myStopFunction() {
  clearTimeout(myTimeout);
}



</script>
</html>