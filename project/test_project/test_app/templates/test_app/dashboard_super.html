<!-- At the top of your page add load static -->
{% load static %}
<!DOCTYPE html>
<html>
<head>
<style>
table, td, th {
  border: 1px solid;
  border: none;
}
tr{
        height:50px

}

table {
  width: 100%;
  border-collapse: collapse;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}
    ul {
      list-style-type: none;
      margin: -8px;
      padding: 0;
      overflow: hidden;
      background-color: #333;
    }

    li {
      float: right;
    }

    li a {
      display: block;
      color: white;
      text-align: center;
      padding: 16px 20px;
      text-decoration: none;
  
    }

.active {
  background-color: black;
  width: 100px;
  text-align: center;
}
</style>
</head>
<body>

        {% if messages %}
        
          <!----  {% for message in messages %} -->
                
                 <p id="msg">{{ message}}</p>  
                
          <!----  {% endfor %}  -->
        
    {% endif %}



         <ul>
      <li><a href="/" >LogOut</a></li>

  
</ul>
<br>
    


<h1 class='list' style="text-align: center; margin: 40px;">Admin Details</h1>


<table>
 
    <thead style="background-color: #eee;">   
            <tr>    
                <th> Serial no.</th>
                <th>Full name</th>
                <th>username</th>
                <th>email</th>
                <th>approved</th>
            </tr>
    </thead>

    <tbody>

       {% for k in data  %}
        
           
            <tr>
                <td>{{forloop.counter}}</td>
                <td>{{k.first_name}}</td>
                
                <td>{{k.username}}</td>
                <td>{{k.email}}</td>
               {% if k.is_active == 0 %}
                  <td> <form action="{% url 'change' %}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="approved" value="{{k.is_active}}">
                    <input type="hidden" name="username" value="{{k.username}}">

                    <input type="submit" value="Approve"> </form>

               </td> 
               {% else %}
                   <td> <form action="{% url 'change' %}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="approved" value="{{k.is_active}}">
                    <input type="hidden" name="username" value="{{k.username}}">
                    <input type="submit" value="Disapprove"> </form>
                      </td>
                      {% endif %}
                
            
                
                
            
        

    </tbody>
            
            {% endfor %}
        </table>






</body>
<script>
       const myTimeout = setTimeout(myGreeting, 2000);

function myGreeting() {
  document.getElementById("msg").innerHTML = ""
}

function myStopFunction() {
  clearTimeout(myTimeout);
}

</script>
</html>





<!-- def login_all(request):
    if request.method == 'POST':
        username = request.POST.get('username').strip()
        password = request.POST.get('password').strip()

        next_url = request.GET.get('next')

        
        try:
            user = User.objects.get(username=username)
            auth_user = authenticate(request, username=username, password=password)
            if auth_user is not None:
                if auth_user.is_active:
                    login(request, auth_user)
                    request.session['name'] = username
                    return redirect(next_url) if next_url else redirect('dashboard')
                else:
                    return render(request, 'test_app/login.html', {'msg': "Please wait for approval"})
            else:
                return render(request, 'test_app/login.html', {'msg': "Incorrect username or password"})
        except User.DoesNotExist:
            pass  # continue to other checks

        # 2. Handle superuser login (not hashed — fix this later)
        if superuser.objects.filter(username=username, password=password).exists():
            request.session['name'] = username
            return redirect('dashboard_super')

        # 3. Handle Employee login (not hashed — consider fixing)
        if Employee.objects.filter(employee_code=username, employee_password=password).exists():
            request.session['employee_code'] = username
            return redirect('dashboard_emp')

        # If none matched
        return render(request, 'test_app/login.html', {'msg': "Invalid credentials"})

    return render(request, 'test_app/login.html')










                    # user = User(first_name=firstname,username=username,password= raw_password,email=email , is_active = False)
                    user = User(first_name=firstname, username=username, email=email)
                    user.set_password(raw_password)  

                   # user=superuser(username=username,password=raw_password)
                    user.save()
                    #messages.success(request,'registration successsfull')
                    request.session['registerMsg']="Registered Successfully"
                    return redirect('login_page')  -->